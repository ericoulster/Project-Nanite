{% extends 'base.html' %}

{% block content %}

<div id="main-content" class="container">
  {% for idx, project in projects %}
  <div id="project-{{idx}}">
    <form id="project-{{idx}}-form" action="/project-options/{{idx}}" method="POST">
      <fieldset> 
          <legend>{{ project.name }}</legend>
            <input type="text" name="projectid" value="{{idx}}" class="formfield" hidden required disabled><br/>
            <label>Project Name: </label><input type="text" name="name" value="{{ project.name }}" class="formfield" required disabled><br/>
            <label>File/folder Path:</label><input type="text" name="filepath" value="{{ project.filepath }}" class="formfield" required disabled><br/>
            <label>Files of type:</label>
              <select name="filetype" selected="{{ project.filetype }}" class="formfield" required disabled>
                <option value="txt">txt</option>
                <option value="rtf">rtf</option>
                <option value="docx">docx</option>
              </select><br/>
            <label>Target Word Count:</label><input type="text" name="targetwordcount" value="{{ project.targetwordcount }}" class="formfield" required disabled><br/>
            <label>Target End Date:</label><input type="text" name="targetenddate" value="{{ project.targetenddate }}" class="formfield" required disabled><br/>
            <input type="submit" value="Update Project" class="formfield" disabled>
      </fieldset> 
    </form>
    <p>
      <form action = "/current-project" method = "POST">
        <input type="hidden" name="currentproject" value="{{idx}}">
        <input type="submit" value="Select Current Project">
     </form>
      
      
      <button onclick="alert(document.cookie);">Cookie Alert</button></p>
    <p><button onclick="pr = document.querySelectorAll('div#project-{{idx}} > form#project-{{idx}}-form .formfield'); pr.forEach(function(x){x.toggleAttribute('disabled')})">Edit Project</button>
      <form action = "/project-options/{{idx}}/del" method = "POST">
        <input type="hidden" name="delproject" value="{{idx}}">
        <input type="submit" value="Delete Project">
     </form>
    </p>
  </div>
{% endfor %}

  <div id="new-project">
    <form action="/options" method="post">
      <fieldset> 
          <legend>Add a new project here:</legend>
            <label>Project Name: </label><input type="text" name="name" required><br/>
            <label>File/folder Path:</label><input type="text" name="filepath" required><br/>
            <label>Files of type:</label>
            <select name="filetype" required>
              <option value="txt">txt</option>
              <option value="rtf">rtf</option>
              <option value="docx">docx</option>
            </select><br/>
            <label>Target Word Count:</label><input type="text" name="targetwordcount" required><br/>
            <label>Target End Date:</label><input type="text" name="targetenddate" required><br/>
            <input type="submit" value="Add New Project">
      </fieldset> 
    </form>
  </div>  
</div>
{% endblock %}